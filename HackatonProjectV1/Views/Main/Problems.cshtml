@model List<HackatonProjectV1.Entities.MainPageElements.Complaint>
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = "~/Views/_UnivercityProfileLayout.cshtml";
}

<main class="layout-container flex h-full grow flex-col">

    <!-- Hero Section -->
    <div class="relative w-full h-[320px] bg-cover bg-center" style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuCYU1wgkoJ15Vi6O0ps6AjU3n12Ej0CcI5VNbz_QSTU6oNmezC88ba05UtuAdbkbADU-lCJeOW5J45JBX-RuAa9fXc2SJJyhQdnzOoZyizJ6uJwlgimHVxRLOTbfXUwfjjwXR1lgGbMTCYSQucRp44r1BHKEuxWAKbWSRxlwxXbiWvdnbB8bNG8_ZbLj8GRwO2v_LWtHzIeQQDMi00ovBszMTjefvRZWH-632jrNyHj_PXR54VfqhwromCiVrScqZk3-BV_iOLygcqS')">
        <div class="absolute inset-0 bg-gradient-to-t from-background-dark via-background-dark/80 to-transparent"></div>
        <div class="absolute bottom-0 left-0 w-full px-4 sm:px-10 pb-8 flex justify-center">
            <div class="w-full max-w-[1024px] flex flex-col sm:flex-row gap-6 items-end sm:items-center">
                <div class="bg-white p-2 rounded-2xl shadow-lg shrink-0">
                    <div class="bg-center bg-no-repeat bg-contain rounded-xl h-24 w-24 sm:h-32 sm:w-32" style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuAFYbl4nIPUPiApnPAnpjQ80Aq0LYXT_M2iIRCBm9VPfirkP-Y0B614xEZ8uysDc5biVZbEA4dK07JczYQyOaQEST1zo_y-BHwmhX7IMWYBhICMZurGc30nu6t-YFRPhBEqODef4BTVL28zxCuvbOBxFfnqh3ynOo59BXNXVYDJxyi3mpxDxUPiV7noz-twG2PqkCvPOW6H9lbAUi8y5DJEJd0UK1n8jVOrkNo-oKhHyU3VBbAnD39HORBMswDT9KrBHMSoCucGjvRU')"></div>
                </div>
                <div class="flex flex-col gap-1 sm:gap-2 mb-1 sm:mb-2">
                    <h1 class="text-white text-3xl sm:text-4xl font-bold leading-tight tracking-tight shadow-black drop-shadow-md">
                        İstanbul Teknik Üniversitesi
                    </h1>
                    <div class="flex flex-wrap gap-4 items-center">
                        <div class="flex items-center gap-1 text-primary">
                            <span class="material-symbols-outlined text-[20px]">location_on</span>
                            <span class="text-sm font-medium">İstanbul, Türkiye</span>
                        </div>
                        <div class="flex items-center gap-1 text-text-secondary">
                            <span class="material-symbols-outlined text-[20px]">school</span>
                            <span class="text-sm font-medium">Devlet Üniversitesi</span>
                        </div>
                        <div class="flex items-center gap-1 text-text-secondary">
                            <span class="material-symbols-outlined text-[20px]">groups</span>
                            <span class="text-sm font-medium">35,000+ Öğrenci</span>
                        </div>
                        <div class="flex items-center gap-1 text-text-secondary">
                            <span class="material-symbols-outlined text-[20px] text-yellow-400 fill-current">star</span>
                            <span class="text-sm font-medium text-white">4.8</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Filter Bar -->
    <div class="w-full bg-surface-dark/95 backdrop-blur-sm border-b border-border-dark px-4 sm:px-10 sticky top-[65px] z-40 shadow-sm transition-all">
        <div class="flex justify-center items-center py-3 gap-4">
            <div class="relative w-full max-w-xl group">
                <span class="absolute inset-y-0 left-4 flex items-center text-text-secondary group-focus-within:text-primary transition-colors">
                    <span class="material-symbols-outlined text-[22px]">search</span>
                </span>
                <input class="w-full h-11 pl-12 pr-4 rounded-full bg-background-dark border border-border-dark text-white placeholder-text-secondary focus:ring-2 focus:ring-primary/50 focus:border-primary text-sm transition-all shadow-inner" placeholder="Aktif problem, kampüs sorunu veya konu ara..." type="text" />
            </div>
            <a href="#" class="flex items-center gap-2 bg-accent-red hover:bg-red-500 text-white font-bold py-2.5 px-5 rounded-full shadow-lg shadow-accent-red/20 hover:shadow-accent-red/40 transition-all active:scale-95 no-underline">
                <span class="material-symbols-outlined text-[20px]">report_problem</span>
                <span>Sorun Bildir</span>
            </a>
        </div>
    </div>

    <!-- Problem Feed -->
    <div class="flex flex-1 justify-center px-4 sm:px-10 py-8">
        <div class="flex flex-col max-w-[800px] w-full gap-6">

            <!-- Feed Controls (Updated with Form) -->
            <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-red-500/10 rounded-lg text-accent-red border border-red-500/20">
                        <span class="material-symbols-outlined text-[24px]">error</span>
                    </div>
                    <h2 class="text-2xl font-bold text-white">Aktif Problemler</h2>
                </div>
                <div class="flex items-center gap-3 w-full sm:w-auto">
                    <form asp-action="FilterComplaint" method="post" class="flex items-center gap-2 bg-surface-dark rounded-full p-1 border border-border-dark">
                        <label class="cursor-pointer">
                            <input type="radio" name="filter" value="all"  class="peer sr-only" @(ViewBag.SelectedFilter == "all" ? "checked" : "")>
                            <span class="block px-4 py-1.5 rounded-full text-text-secondary peer-checked:bg-white peer-checked:text-background-dark peer-checked:shadow-sm text-xs font-bold transition-all whitespace-nowrap hover:text-white peer-checked:hover:text-background-dark">Tümü</span>
                        </label>
                        <label class="cursor-pointer">
                            <input type="radio" name="filter" value="mostSupported" class="peer sr-only" @(ViewBag.SelectedFilter == "mostSupported" ? "checked" : "")>
                            <span class="block px-4 py-1.5 rounded-full text-text-secondary peer-checked:bg-white peer-checked:text-background-dark peer-checked:shadow-sm text-xs font-bold transition-all whitespace-nowrap hover:text-white peer-checked:hover:text-background-dark">En Çok Desteklenen</span>
                        </label>
                        <label class="cursor-pointer">
                            <input type="radio" name="filter" value="solved" class="peer sr-only" @(ViewBag.SelectedFilter == "solved" ? "checked" : "")>
                            <span class="block px-4 py-1.5 rounded-full text-text-secondary peer-checked:bg-white peer-checked:text-background-dark peer-checked:shadow-sm text-xs font-bold transition-all whitespace-nowrap hover:text-white peer-checked:hover:text-background-dark">Çözüldü</span>
                        </label>
                        <label class="cursor-pointer">
                            <input type="radio" name="filter" value="newest" class="peer sr-only" @(ViewBag.SelectedFilter == "newest" ? "checked" : "")>
                            <span class="block px-4 py-1.5 rounded-full text-text-secondary peer-checked:bg-white peer-checked:text-background-dark peer-checked:shadow-sm text-xs font-bold transition-all whitespace-nowrap hover:text-white peer-checked:hover:text-background-dark">En Yeni</span>
                        </label>

                        <button type="submit" class="flex items-center justify-center p-1.5 rounded-full bg-surface-dark border border-border-dark text-text-secondary hover:text-white hover:border-text-secondary transition-colors" title="Filtrele">
                            <span class="material-symbols-outlined text-[20px]">filter_list</span>
                        </button>
                    </form>
                    
                </div>
            </div>


            @if(!Model.Any())
            {
                <div class="text-center text-text-secondary py-10">
                    <span class="text-lg font-medium">Problem bulunmamaktadır.</span>
                </div>
			}

            

            @foreach (var problem in Model)
            {
                <a href="/Main/ProblemDetail/@problem.Id" class="group flex flex-col bg-surface-dark border border-border-dark rounded-xl p-6 hover:border-accent-red/30 transition-all duration-300 relative overflow-hidden block no-underline">
                    <div class="absolute top-0 right-0 w-1 h-full bg-accent-red opacity-50"></div>
                    <div class="flex items-center gap-3 mb-4">
                        <div class="size-10 rounded-full border border-border-dark bg-gray-600 bg-cover" style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuC7Gllu9-afbhoW_23mBwlm3adYHu-gOINcVnnFCEMWo4C1DwYvpkA8eUXNifqv-qBVTe9SUaRBabeKVml8pRTcltGMxt4DON7IF5GIeXPHkTdd4ALNunIm_Fy74SdbtwtFjqGdqhE8jvaBSAQH2EbTgTRf_OUdw6q_gRUnz-rQx8oAhYl_R3yKcz2xEc39ShYzvjk-WLsUCAK85mf8V-qAVOpisba9mL1ThruJx0sZe1-mKYNFLMO7zHYOq0DWkyM3cv5gvZUl3n6e')"></div>
                        <div class="flex flex-col">
                            <span class="text-white text-sm font-bold flex items-center gap-2">@problem.User.NameAndLastname</span>
                            <span class="text-text-secondary text-xs">@problem.User.Department • @problem.CreateTime</span>
                        </div>
                        <div class="ml-auto flex items-center gap-2">
                            <span class="px-2 py-1 rounded-md text-[10px] font-bold uppercase border tracking-wider bg-orange-500/10 text-orange-400 border-orange-500/20">@problem.Label</span>
                            
                        </div>
                    </div>
                    <div class="mb-4">
                        <h3 class="text-xl font-bold text-white mb-2 group-hover:text-accent-red transition-colors cursor-pointer">
                            @problem.Title
                        </h3>
                        <p class="text-text-secondary text-sm leading-relaxed">
                            @problem.Description
                        </p>
                    </div>
                    <div class="mt-2 pt-4 border-t border-border-dark flex flex-wrap items-center justify-between gap-4">
                        <div class="flex items-center gap-4">
                            <div role="button" class="flex items-center gap-2 group/vote cursor-pointer" title="Bu sorunu destekliyorum">
                                <div class="p-2 rounded-lg bg-green-500/10 text-support-green group-hover/vote:bg-support-green group-hover/vote:text-white transition-all duration-200">
                                    <span class="material-symbols-outlined text-[20px]">thumb_up</span>
                                </div>
                                <div class="flex flex-col">
                                    <span class="text-white text-sm font-bold">@problem.Support</span>
                                    <span class="text-[10px] font-bold text-text-secondary uppercase group-hover/vote:text-support-green transition-colors">Destekle</span>
                                </div>
                            </div>
                            <div class="w-px h-8 bg-border-dark"></div>
                            <div role="button" class="flex items-center gap-2 group/vote cursor-pointer" title="Bu sorunu desteklemiyorum">
                                <div class="p-2 rounded-lg bg-border-dark text-text-secondary group-hover/vote:bg-oppose-red group-hover/vote:text-white transition-all duration-200">
                                    <span class="material-symbols-outlined text-[20px]">thumb_down</span>
                                </div>
                                <div class="flex flex-col">
                                    <span class="text-text-secondary text-sm font-bold group-hover/vote:text-white transition-colors">@problem.Dislike</span>
                                    <span class="text-[10px] font-bold text-text-secondary uppercase group-hover/vote:text-oppose-red transition-colors">Destekleme</span>
                                </div>
                            </div>
                        </div>
                        <div role="button" class="flex items-center gap-2 text-text-secondary hover:text-primary transition-colors ml-auto text-xs font-bold px-3 py-2 rounded-lg hover:bg-border-dark cursor-pointer">
                            <span class="material-symbols-outlined text-[18px]">forum</span>
                            @problem.comments.Count() Yorum
                        </div>
                    </div>
                </a>
            }
            <!-- Card 2 -->
            

            <!-- Card 3 -->
            
            <div class="flex justify-center mt-4">
                <button class="text-primary hover:text-white font-bold text-sm bg-primary/10 hover:bg-primary px-6 py-3 rounded-full transition-all">
                    Daha Fazla Göster
                </button>
            </div>
        </div>
    </div>
</main>
